{% extends "index.html" %}  <!-- bu extends sonra homepage.html ile değiştirilecek-->
{% load static %}
{% block content %}

    {% if messages %}

    {% for mesaj in messages %}
    <div class="alert alert-{{mesaj.tags}} text-center">
    {{mesaj}}
    </div>
    {% endfor %}

    {% else %}
    {% endif %}

    <div class="container mt-5 d-flex align-items-center justify-content-center">
        <div class="row border rounded-2 p-4">
            <div class="col-4">
                <img src="{{ideapins.image.url}}" width="100%" style="border-radius: 10px;" alt="">
            </div>

            <div class="col-8">
                <h3>{{ideapins.title}}</h3>
                <span>{{ideapins.description}}</span>
                <p>{{ideapins.user}}</p>  
                <h3>Yorumlar</h3>
                {% if comments %}
                    {% for comment in comments %}
                    <div class="d-flex align-items-center">
                    {% for profil in profiller %}
                    <img src="{{profil.resim.url}}" width="32" height="32" class="rounded-5 me-2" style="margin-top: 10px;" alt="">
                    {% endfor %}
                    <strong class="me-2 mt-1">{{comment.commenter.username}}</strong><p class="mb-0 mt-1" style="overflow-wrap: break-word; word-break: break-all;">{{ comment.content }}</p>
                    </div>
                    {% endfor %}

                {% else %}

                    <p style="color:gray;">Henüz yorum yok! Sohbeti başlatmak için bir tane ekleyin.</p>

                {% endif %}
                    <hr>
                    <h3>Ne düşünüyorsunuz?</h3>
                    <div class="d-flex flex-fill align-items-stretch me-2 p-2">
                    {% for profil in profiller %}
                        <img src="{{profil.resim.url}}" width="48" height="48" class="rounded-5" style="margin-top: 10px;" alt="">
                    {% endfor %}
                    <form method="post" class="d-flex flex-grow-1 p-2" action="{% url 'create_comment' content_type.id ideapins.id %}">
                        {% csrf_token %}
                        <textarea name="content" class="form-control me-2"></textarea>
                        <input type="submit" value="Submit">
                    </form> 
                    
            </div>
        </div>           
    </div>
{% endblock content %}
